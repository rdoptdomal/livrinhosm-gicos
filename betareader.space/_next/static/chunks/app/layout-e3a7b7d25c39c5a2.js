(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{347:()=>{},848:(e,a,t)=>{"use strict";t.d(a,{default:()=>o});var s=t(5155),r=t(2108);function o(e){let{children:a}=e;return(0,s.jsx)(r.SessionProvider,{children:a})}},1007:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1979:e=>{e.exports={style:{fontFamily:"'Poppins', 'Poppins Fallback'",fontStyle:"normal"},className:"__className_51684b",variable:"__variable_51684b"}},2064:(e,a,t)=>{"use strict";t.d(a,{default:()=>r});var s=t(2115);let r=()=>{let[e,a]=(0,s.useState)("loading");return(0,s.useEffect)(()=>{let e=setTimeout(async()=>{try{console.log("\uD83D\uDD04 Inicializando sistema de cron...");let e=await fetch("/api/init-cron",{method:"GET"});if(e.ok){let t=await e.json();console.log("✅ Cron inicializado:",t.message),a("active")}else console.error("❌ Erro ao iniciar cron"),a("error")}catch(e){console.error("❌ Erro na inicializa\xe7\xe3o do cron:",e),a("error")}},1e3);return()=>clearTimeout(e)},[]),null}},2138:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},3311:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},3741:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var s=t(5155),r=t(2115),o=t(1154);let l=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter(Boolean).join(" ")},i=r.forwardRef((e,a)=>{let{className:t,variant:r="primary",size:i="md",loading:n=!1,icon:c,iconPosition:d="left",children:h,disabled:u,...m}=e;return(0,s.jsxs)("button",{ref:a,className:l("inline-flex items-center justify-center font-medium rounded-2xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] active:scale-[0.98]",{primary:"bg-orange-500 hover:bg-orange-600 text-white shadow-lg hover:shadow-xl focus:ring-orange-500",secondary:"bg-white hover:bg-orange-50 text-gray-800 shadow-lg hover:shadow-xl focus:ring-orange-500 border border-gray-200",outline:"border-2 border-orange-500 text-orange-500 hover:bg-orange-500 hover:text-white focus:ring-orange-500",ghost:"text-gray-700 hover:bg-orange-50 focus:ring-orange-500",success:"bg-green-500 hover:bg-green-600 text-white shadow-lg focus:ring-green-500",warning:"bg-yellow-500 hover:bg-yellow-600 text-white shadow-lg focus:ring-yellow-500",error:"bg-red-500 hover:bg-red-600 text-white shadow-lg focus:ring-red-500"}[r],{sm:"px-4 py-2 text-sm gap-2",md:"px-6 py-3 text-base gap-2",lg:"px-8 py-4 text-lg gap-3",xl:"px-10 py-5 text-xl gap-3"}[i],t),disabled:u||n,...m,children:[n&&(0,s.jsx)(o.A,{className:"w-4 h-4 animate-spin"}),!n&&c&&"left"===d&&(0,s.jsx)("span",{className:"flex-shrink-0",children:c}),(0,s.jsx)("span",{className:"flex-1",children:h}),!n&&c&&"right"===d&&(0,s.jsx)("span",{className:"flex-shrink-0",children:c})]})});i.displayName="Button";let n=i},3915:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var s=t(5155),r=t(2115);let o=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter(Boolean).join(" ")},l=r.forwardRef((e,a)=>{let{className:t,variant:l="soft",inputSize:i="md",error:n=!1,icon:c,rightIcon:d,label:h,helperText:u,type:m="text",...x}=e,p=!!n,g="string"==typeof n?n:"",f=o("w-full font-body transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed",{default:"border border-soft-border bg-soft-card focus:border-primary-500 focus:ring-primary-500",soft:"bg-peach-100 border-0 focus:bg-soft-card focus:ring-primary-500 shadow-sm",outlined:"border-2 border-soft-border bg-transparent focus:border-primary-500 focus:ring-primary-500"}[l],{sm:"px-3 py-2 text-sm rounded-lg",md:"px-4 py-3 text-base rounded-xl",lg:"px-6 py-4 text-lg rounded-2xl"}[i],p?"border-error-500 focus:border-error-500 focus:ring-error-500 bg-error-50":"",c?"pl-12":"",d?"pr-12":"",t);return(0,s.jsxs)("div",{className:"w-full",children:[h&&(0,s.jsx)("label",{className:"block text-sm font-medium text-soft-text mb-2 font-ui",children:h}),(0,s.jsxs)("div",{className:"relative",children:[c&&(0,s.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-soft-muted",children:r.isValidElement(c)?c:r.createElement(c,{className:"w-5 h-5"})}),(0,s.jsx)("input",{ref:a,type:m,className:f,...x}),d&&(0,s.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-soft-muted",children:d})]}),(u||g)&&(0,s.jsx)("p",{className:o("mt-2 text-sm font-body",p?"text-error-500":"text-soft-muted"),children:g||u})]})});l.displayName="Input";let i=l},4416:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5376:e=>{e.exports={style:{fontFamily:"'Merriweather', 'Merriweather Fallback'",fontStyle:"normal"},className:"__className_1836d9",variable:"__variable_1836d9"}},5662:(e,a,t)=>{"use strict";t.d(a,{default:()=>R});var s=t(5155),r=t(2115),o=t(2108),l=t(6664),i=t(760),n=t(6408),c=t(8186),d=t(9946);let h=(0,d.A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var u=t(8564),m=t(3311),x=t(2138),p=t(3741),g=t(1007),f=t(9420),y=t(5868);let b=(0,d.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var v=t(646),w=t(3915);let j=(0,d.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var N=t(5040),A=t(4416),k=t(4186),P=t(5695);function C(e){let{isOpen:a,onClose:t}=e,[o,l]=(0,r.useState)(0),[c,d]=(0,r.useState)(!0),h=(0,P.useRouter)(),g=[{title:"Buscando avalia\xe7\xf5es...",description:"Procurando livros que combinam com seu perfil",icon:j,duration:1500},{title:"Encontramos R$ 100,00!",description:"Um livro de alta qualidade aguarda sua avalia\xe7\xe3o",icon:N.A,duration:1e3,value:100},{title:"Mais R$ 500,00 dispon\xedvel!",description:"Outro livro incr\xedvel foi liberado para voc\xea",icon:u.A,duration:1e3,value:500},{title:"Incr\xedvel! R$ 600,00 encontrado!",description:"Um livro premiado est\xe1 esperando por voc\xea",icon:m.A,duration:1e3,value:600}];(0,r.useEffect)(()=>{if(!a){l(0),d(!0);return}let e=setTimeout(()=>{o<g.length-1?l(o+1):d(!1)},g[o].duration);return()=>clearTimeout(e)},[o,a,g]);let f=()=>{t()};return a?(0,s.jsx)(i.N,{children:(0,s.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:f,children:(0,s.jsxs)(n.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},onClick:e=>e.stopPropagation(),className:"bg-white rounded-3xl shadow-2xl w-full max-w-md max-h-[90vh] relative overflow-hidden flex flex-col",children:[(0,s.jsxs)("div",{className:"relative p-6 pb-4 bg-gradient-to-br from-orange-50 to-yellow-50 border-b border-orange-100",children:[(0,s.jsx)("button",{onClick:f,className:"absolute top-4 right-4 w-8 h-8 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full flex items-center justify-center transition-all duration-200 shadow-sm hover:shadow-md",children:(0,s.jsx)(A.A,{className:"w-4 h-4 text-gray-600"})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(n.P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-gradient-to-br from-orange-400 to-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:(0,s.jsx)(j,{className:"w-8 h-8 text-white"})}),(0,s.jsx)(n.P.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-xl font-bold text-gray-800 mb-2",children:"Buscando Pr\xf3ximas Avalia\xe7\xf5es"}),(0,s.jsx)(n.P.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-sm text-gray-600",children:"Analisando sua pontua\xe7\xe3o e prefer\xeancias..."})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[c&&(0,s.jsxs)("div",{className:"space-y-3",children:[g.map((e,a)=>{let t=e.icon,r=a===o,l=a<o;return(0,s.jsxs)(n.P.div,{initial:{opacity:0,x:-20},animate:{opacity:r||l?1:.3,x:0,scale:r?1.02:1},transition:{delay:.1*a},className:"relative p-4 rounded-2xl border-2 transition-all duration-300 ".concat(r?"border-orange-300 bg-orange-50 shadow-md":l?"border-green-300 bg-green-50":"border-gray-200 bg-gray-50"),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ".concat(r?"bg-orange-500 text-white":l?"bg-green-500 text-white":"bg-gray-300 text-gray-600"),children:l?(0,s.jsx)(v.A,{className:"w-5 h-5"}):(0,s.jsx)(t,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm ".concat(r?"text-orange-800":l?"text-green-800":"text-gray-600"),children:e.title}),(0,s.jsx)("p",{className:"text-xs mt-1 ".concat(r?"text-orange-700":l?"text-green-700":"text-gray-500"),children:e.description})]}),e.value&&(r||l)&&(0,s.jsxs)(n.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},className:"bg-gradient-to-r from-green-500 to-blue-500 text-white px-3 py-1 rounded-full text-xs font-bold flex-shrink-0",children:["R$ ",e.value]})]}),r&&(0,s.jsx)(n.P.div,{initial:{width:0},animate:{width:"100%"},transition:{duration:e.duration/1e3,ease:"linear"},className:"absolute bottom-0 left-0 h-1 bg-orange-500 rounded-b-2xl"})]},a)}),(0,s.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-4",children:[(0,s.jsx)("div",{className:"flex justify-center space-x-2 mb-3",children:[0,1,2].map(e=>(0,s.jsx)(n.P.div,{animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,delay:.2*e},className:"w-2 h-2 bg-orange-500 rounded-full"},e))}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Analisando biblioteca de livros..."})]})]}),!c&&(0,s.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-2xl p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[(0,s.jsx)(k.A,{className:"w-6 h-6 text-blue-600"}),(0,s.jsx)("h3",{className:"text-lg font-bold text-blue-800",children:"Aguarde Novas Avalia\xe7\xf5es"})]}),(0,s.jsx)("p",{className:"text-sm text-blue-700 leading-relaxed text-center",children:"Nossos editores est\xe3o preparando uma nova sele\xe7\xe3o de livros especialmente para voc\xea. Em breve, voc\xea receber\xe1 notifica\xe7\xf5es sobre novas oportunidades de avalia\xe7\xe3o."})]}),(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-2xl p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(u.A,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-yellow-800 mb-1 text-sm",children:"Dica Pro"}),(0,s.jsx)("p",{className:"text-xs text-yellow-700",children:"Mantenha-se ativo na plataforma para ser um dos primeiros a receber as novas avalia\xe7\xf5es com valores mais altos!"})]})]})})]})]}),!c&&(0,s.jsx)("div",{className:"p-6 pt-4 bg-gray-50 border-t border-gray-100",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(p.A,{size:"lg",onClick:()=>{t(),h.push("/home")},className:"w-full bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white font-semibold",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsx)("span",{children:"Voltar para o In\xedcio"}),(0,s.jsx)(x.A,{className:"w-4 h-4"})]})}),(0,s.jsx)("button",{onClick:f,className:"w-full py-2 text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Fechar"})]})})]})})}):null}let S=[{value:"cpf",label:"CPF",placeholder:"123.456.789-00",icon:g.A},{value:"phone",label:"Telefone",placeholder:"(11) 99999-9999",icon:f.A}];function M(e){let{isOpen:a,onClose:t,onWithdrawSuccess:o,onSuccess:l}=e,[c,d]=(0,r.useState)("form"),[h,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!1),[g,f]=(0,r.useState)({cpf:"",pixKeyType:"cpf",pixKey:""}),[j,N]=(0,r.useState)({}),[A,k]=(0,r.useState)(!1),P=S.find(e=>e.value===g.pixKeyType),M=e=>{let a=e.replace(/\D/g,"");if(11!==a.length||/^(\d)\1{10}$/.test(a))return!1;let t=0;for(let e=0;e<9;e++)t+=parseInt(a.charAt(e))*(10-e);let s=10*t%11;if((10===s||11===s)&&(s=0),s!==parseInt(a.charAt(9)))return!1;t=0;for(let e=0;e<10;e++)t+=parseInt(a.charAt(e))*(11-e);return(10==(s=10*t%11)||11===s)&&(s=0),s===parseInt(a.charAt(10))},F=(e,a)=>{switch(console.log("\uD83D\uDD0D Validando chave PIX:",{key:e,type:a}),a){case"cpf":let t=M(e);return console.log("\uD83D\uDCCB Valida\xe7\xe3o CPF:",{key:e,valid:t}),t;case"phone":let s=e.replace(/\D/g,"");if(console.log("\uD83D\uDCF1 Telefone limpo:",s),s.length<10||s.length>11)return console.log("❌ Telefone com tamanho inv\xe1lido:",s.length),!1;let r=parseInt(s.substring(0,2));if(console.log("\uD83D\uDCCD DDD:",r),r<11||r>99)return console.log("❌ DDD inv\xe1lido:",r),!1;if(11===s.length&&"9"!==s.charAt(2))return console.log("❌ Celular sem 9 no in\xedcio:",s.charAt(2)),!1;return console.log("✅ Telefone v\xe1lido:",s),!0;default:return console.log("❌ Tipo de chave desconhecido:",a),!1}},R=(e,a)=>{switch(a){case"cpf":return e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2");case"phone":let t=e.replace(/\D/g,"");if(0===t.length)return"";if(t.length<=2)return t;if(t.length<=6)return"(".concat(t.substring(0,2),") ").concat(t.substring(2));if(t.length<=10){let e=t.substring(0,2),a=t.substring(2);if(a.length<=4)return"(".concat(e,") ").concat(a);return"(".concat(e,") ").concat(a.substring(0,4),"-").concat(a.substring(4))}if(11===t.length){let e=t.substring(0,2),a=t.substring(2);return"(".concat(e,") ").concat(a.substring(0,5),"-").concat(a.substring(5))}let s=t.substring(0,11),r=s.substring(0,2),o=s.substring(2);return"(".concat(r,") ").concat(o.substring(0,5),"-").concat(o.substring(5));default:return e}},q=(e,a)=>{let t=a;"pixKey"===e&&g.pixKeyType&&(t=R(a,g.pixKeyType)),f(a=>({...a,[e]:t})),j[e]&&N(a=>({...a,[e]:""}))},T=e=>{f(a=>({...a,pixKeyType:e,pixKey:""})),k(!1),j.pixKey&&N(e=>({...e,pixKey:""}))},K=()=>{let e={};return g.cpf?M(g.cpf)||(e.cpf="CPF inv\xe1lido"):e.cpf="CPF \xe9 obrigat\xf3rio",g.pixKey?F(g.pixKey,g.pixKeyType)||(e.pixKey="Chave PIX inv\xe1lida para ".concat(null==P?void 0:P.label.toLowerCase())):e.pixKey="Chave PIX \xe9 obrigat\xf3ria",N(e),0===Object.keys(e).length},_=async e=>{if(e.preventDefault(),h)return void console.log("\uD83D\uDEAB Submit duplo bloqueado no modal - j\xe1 est\xe1 processando");if(K()){u(!0);try{let e=g.pixKey.replace(/\D/g,"");console.log("\uD83D\uDCE4 Enviando dados para API:",{cpf:g.cpf.replace(/\D/g,""),pixKey:e,pixKeyType:g.pixKeyType}),console.log("\uD83D\uDD0D Chave PIX processada:",e),console.log("\uD83D\uDD0D Tipo da chave:",g.pixKeyType);let a=await fetch("/api/withdraw/secure",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cpf:g.cpf.replace(/\D/g,""),pixKey:e,pixKeyType:g.pixKeyType})}),t=await a.json();if(a.ok)d("success"),x(!0),o&&o(t),setTimeout(()=>{z()},3e3);else{let e=t.error||"Erro ao processar saque";429===a.status?e=t.error+" Isso previne problemas com m\xfaltiplos saques acidentais.":t.error&&t.error.includes("saque sendo processado")?e=t.error+" Verifique seu hist\xf3rico de transa\xe7\xf5es.":t.error&&t.error.includes("Chave PIX n\xe3o encontrada")&&(e='A chave PIX "'.concat(g.pixKey,'" n\xe3o foi encontrada ou n\xe3o est\xe1 cadastrada no sistema banc\xe1rio. Verifique se o ').concat(null==P?void 0:P.label.toLowerCase()," est\xe1 correto ou use uma chave PIX v\xe1lida.")),N({submit:e})}}catch(e){console.error("Erro ao processar saque:",e),N({submit:"Erro interno. Tente novamente."})}finally{u(!1)}}},z=()=>{d("form"),f({cpf:"",pixKeyType:"cpf",pixKey:""}),N({}),x(!1),t()};return a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)(n.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-3xl p-6 max-w-md w-full mx-4 shadow-2xl",children:["form"===c&&(0,s.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(y.A,{className:"w-8 h-8 text-green-600"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Sacar R$ 1,00"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Preencha seus dados para receber via PIX"})]}),(0,s.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,s.jsx)(w.A,{label:"CPF",type:"text",value:g.cpf,onChange:e=>q("cpf",e.target.value),placeholder:"123.456.789-00",error:j.cpf,maxLength:14}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Chave PIX"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>k(!A),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all flex items-center justify-between bg-white",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(null==P?void 0:P.icon)&&(0,s.jsx)(P.icon,{className:"w-5 h-5 text-gray-600"}),(0,s.jsx)("span",{className:"font-medium",children:null==P?void 0:P.label})]}),(0,s.jsx)(b,{className:"w-5 h-5 text-gray-400 transition-transform ".concat(A?"rotate-180":"")})]}),(0,s.jsx)(i.N,{children:A&&(0,s.jsx)(n.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-xl shadow-lg z-10 max-h-60 overflow-y-auto",children:S.map(e=>{let a=e.icon;return(0,s.jsxs)("button",{type:"button",onClick:()=>T(e.value),className:"w-full px-4 py-3 flex items-center space-x-3 hover:bg-gray-50 transition-colors first:rounded-t-xl last:rounded-b-xl",children:[(0,s.jsx)(a,{className:"w-5 h-5 text-gray-600"}),(0,s.jsx)("span",{className:"font-medium",children:e.label})]},e.value)})})})]})]}),(0,s.jsx)(w.A,{label:"Chave PIX (".concat(null==P?void 0:P.label,")"),type:"text",value:g.pixKey,onChange:e=>q("pixKey",e.target.value),placeholder:null==P?void 0:P.placeholder,error:j.pixKey,maxLength:"phone"===g.pixKeyType?15:14}),j.submit&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3",children:(0,s.jsx)("p",{className:"text-red-600 text-sm",children:j.submit})}),(0,s.jsx)(p.A,{type:"submit",size:"lg",className:"w-full",disabled:h,children:h?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{children:"Processando..."})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(y.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Sacar R$ 1,00"})]})})]})]}),"success"===c&&(0,s.jsxs)(n.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-6",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:(0,s.jsx)(v.A,{className:"w-10 h-10 text-green-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Saque Processado!"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Seu saque de R$ 1,00 foi processado com sucesso. O dinheiro ser\xe1 enviado para sua chave PIX em at\xe9 24 horas."})]}),(0,s.jsx)(p.A,{onClick:z,size:"lg",className:"w-full",children:"Continuar"})]})]})}),(0,s.jsx)(C,{isOpen:m,onClose:()=>x(!1)})]}):null}function F(e){let{isOpen:a,onClose:t,onWithdrawSuccess:d}=e,{update:g}=(0,o.useSession)(),[f,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[w,j]=(0,r.useState)(!1),{setHasWithdrawnOneReal:N,hasWithdrawnOneReal:A}=(0,l.A)();(0,r.useEffect)(()=>{a&&!w&&k()},[a,w]),(0,r.useEffect)(()=>{A&&v(!0)},[A]);let k=async()=>{try{console.log("\uD83D\uDD0D Verificando status de saque no modal...");let e=await fetch("/api/withdraw/secure"),s=await e.json();if(e.ok){let e=!s.canWithdraw,r=s.hasReviewed||!1,o=s.reviewCount||0;console.log("\uD83D\uDCCA Status do servidor (Modal):",{canWithdraw:s.canWithdraw,hasWithdrawn:e,hasReviewed:r,reviewCount:o,reason:s.reason}),v(e),N(e),(e||!r)&&a&&(console.log("✅ Fechando modal - usu\xe1rio j\xe1 sacou ou n\xe3o tem reviews"),setTimeout(()=>{t()},1e3))}}catch(e){console.error("❌ Erro ao verificar status do saque:",e)}finally{j(!0)}},P=async e=>{console.log("✅ Saque realizado com sucesso no modal"),v(!0),y(!1),N(!0);try{await g(),console.log("✅ Sess\xe3o atualizada ap\xf3s saque")}catch(e){console.error("❌ Erro ao atualizar sess\xe3o:",e)}d&&d(e),setTimeout(()=>{console.log("✅ Fechando modal de congratula\xe7\xf5es automaticamente ap\xf3s saque"),t()},2e3)},C=()=>{if(!b)return void console.log("⚠️ Tentativa de fechar modal sem ter sacado - bloqueado");console.log("✅ Fechando modal - saque foi realizado"),t()};return a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.N,{children:(0,s.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:b?C:void 0,children:(0,s.jsxs)(n.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full p-8 relative overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-100 to-yellow-100 rounded-full -translate-y-16 translate-x-16 opacity-50"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-green-100 to-blue-100 rounded-full translate-y-12 -translate-x-12 opacity-50"}),(0,s.jsxs)("div",{className:"relative z-10 text-center",children:[(0,s.jsx)(n.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-20 h-20 bg-gradient-to-br from-orange-400 to-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:(0,s.jsx)(c.A,{className:"w-10 h-10 text-white"})}),(0,s.jsx)(n.P.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-3xl font-bold text-gray-800 mb-4",children:"Parab\xe9ns! \uD83C\uDF89"}),(0,s.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-4 mb-8",children:[(0,s.jsx)("p",{className:"text-lg text-gray-700 leading-relaxed",children:"Voc\xea avaliou seu primeiro livro com sucesso!"}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 border border-orange-200 rounded-2xl p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,s.jsx)(h,{className:"w-5 h-5 text-orange-600"}),(0,s.jsx)("span",{className:"font-semibold text-orange-800",children:"Sua pontua\xe7\xe3o subiu!"})]}),(0,s.jsx)("p",{className:"text-sm text-orange-700",children:"Novos livros ser\xe3o liberados para voc\xea conforme voc\xea avan\xe7a."})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-2xl p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,s.jsx)(u.A,{className:"w-5 h-5 text-green-600"}),(0,s.jsx)("span",{className:"font-semibold text-green-800",children:"Recompensa Dispon\xedvel!"})]}),(0,s.jsx)("p",{className:"text-sm text-green-700",children:"Para continuar respondendo outras avalia\xe7\xf5es, fa\xe7a seu primeiro saque."})]})]}),(0,s.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:b?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"bg-green-100 border border-green-300 rounded-2xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:(0,s.jsx)(u.A,{className:"w-4 h-4 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-green-800",children:"Saque Realizado!"}),(0,s.jsx)("p",{className:"text-sm text-green-700",children:"Aguarde o processamento do pagamento. Seu saldo foi atualizado."})]})]})}),(0,s.jsx)(p.A,{size:"lg",onClick:C,className:"w-full",children:"Continuar Explorando"})]}):(0,s.jsx)(p.A,{size:"lg",onClick:()=>{y(!0)},disabled:!w,className:"w-full bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white font-semibold py-4 px-8 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,s.jsx)(m.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:w?"Sacar R$ 1,00 Agora":"Verificando..."}),(0,s.jsx)(x.A,{className:"w-5 h-5"})]})})}),!b&&(0,s.jsx)(n.P.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-xs text-gray-500 mt-4",children:"Este saque \xe9 limitado a R$ 1,00 por pessoa para garantir a justi\xe7a do sistema."})]})]})})}),(0,s.jsx)(M,{isOpen:f,onClose:()=>y(!1),onWithdrawSuccess:P})]}):null}function R(e){var a;let{children:t}=e,{data:i,status:n}=(0,o.useSession)(),[c,d]=(0,r.useState)(!1),[h,u]=(0,r.useState)(null),{showCongratulationsModal:m,showSearchingModal:x,setShowCongratulationsModal:p,setShowSearchingModal:g,hasWithdrawnOneReal:f,hasCompletedFirstReview:y,setHasWithdrawnOneReal:b,clearUserState:v}=(0,l.A)();return(0,r.useEffect)(()=>{var e,a;(null==i||null==(e=i.user)?void 0:e.id)&&h&&i.user.id!==h&&(console.log("\uD83D\uDC64 Novo usu\xe1rio detectado, limpando estado anterior"),v(),d(!1)),(null==i||null==(a=i.user)?void 0:a.id)&&u(i.user.id)},[null==i||null==(a=i.user)?void 0:a.id,h,v]),(0,r.useEffect)(()=>{(async()=>{if("loading"!==n&&i&&!c)try{console.log("\uD83D\uDD04 Verificando status de saque inicial...");let e=await fetch("/api/withdraw/secure"),a=await e.json();if(e.ok){let e=!a.canWithdraw,t=a.hasReviewed||!1,s=a.reviewCount||0;console.log("\uD83D\uDCCA Status inicial do servidor:",{canWithdraw:a.canWithdraw,hasWithdrawn:e,hasReviewed:t,reviewCount:s,reason:a.reason}),b(e),(e||!t)&&p(!1)}}catch(e){console.error("❌ Erro ao verificar status inicial:",e)}finally{d(!0)}})()},[i,n,c,b,p]),(0,r.useEffect)(()=>{c&&"loading"!==n&&i&&(!y||f||m||(console.log("\uD83C\uDF89 Exibindo modal de parab\xe9ns - primeira review completa e ainda n\xe3o sacou"),p(!0)))},[y,f,m,p,c,i,n]),(0,s.jsxs)(s.Fragment,{children:[t,(0,s.jsx)(F,{isOpen:m,onClose:()=>{p(!1)},onWithdrawSuccess:e=>{l.A.getState().completeWithdrawFlow(e)}}),(0,s.jsx)(C,{isOpen:x,onClose:()=>{g(!1)}})]})}},5798:e=>{e.exports={style:{fontFamily:"'Nunito', 'Nunito Fallback'",fontStyle:"normal"},className:"__className_2a7671",variable:"__variable_2a7671"}},5868:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},6651:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,9993,23)),Promise.resolve().then(t.t.bind(t,1979,23)),Promise.resolve().then(t.t.bind(t,5376,23)),Promise.resolve().then(t.t.bind(t,5798,23)),Promise.resolve().then(t.bind(t,3568)),Promise.resolve().then(t.t.bind(t,347,23)),Promise.resolve().then(t.bind(t,2064)),Promise.resolve().then(t.bind(t,9417)),Promise.resolve().then(t.bind(t,848)),Promise.resolve().then(t.bind(t,5662))},6664:(e,a,t)=>{"use strict";t.d(a,{A:()=>o});var s=t(5453),r=t(6786);let o=(0,s.v)((0,r.Zr)((e,a)=>({showCongratulationsModal:!1,showSearchingModal:!1,hasCompletedFirstReview:!1,hasWithdrawnOneReal:!1,withdrawData:null,setShowCongratulationsModal:a=>e({showCongratulationsModal:a}),setShowSearchingModal:a=>e({showSearchingModal:a}),setHasCompletedFirstReview:a=>e({hasCompletedFirstReview:a}),setHasWithdrawnOneReal:a=>e({hasWithdrawnOneReal:a}),setWithdrawData:a=>e({withdrawData:a}),showCongratulationsAfterReview:()=>{let{hasWithdrawnOneReal:t}=a();t?(console.log("⚠️ Modal de parab\xe9ns n\xe3o exibido - usu\xe1rio j\xe1 sacou"),e({hasCompletedFirstReview:!0})):(e({hasCompletedFirstReview:!0,showCongratulationsModal:!0}),console.log("\uD83C\uDF89 Modal de parab\xe9ns acionado - primeira review completa"))},clearUserState:()=>{e({hasCompletedFirstReview:!1,hasWithdrawnOneReal:!1,showCongratulationsModal:!1,showSearchingModal:!1,withdrawData:null}),console.log("\uD83D\uDD04 Estado do usu\xe1rio limpo")},completeWithdrawFlow:a=>{e({hasWithdrawnOneReal:!0,showCongratulationsModal:!1,showSearchingModal:!0,withdrawData:a}),console.log("✅ Fluxo de saque completado - estado atualizado")},resetWithdrawFlow:()=>{e({showCongratulationsModal:!1,showSearchingModal:!1,hasCompletedFirstReview:!1,hasWithdrawnOneReal:!1,withdrawData:null}),console.log("\uD83D\uDD04 Fluxo de saque resetado")},shouldShowCongratulationsModal:()=>{let{hasCompletedFirstReview:e,hasWithdrawnOneReal:t}=a();return e&&!t},canWithdraw:()=>{let{hasCompletedFirstReview:e,hasWithdrawnOneReal:t}=a();return e&&!t}}),{name:"withdraw-storage",partialize:e=>({hasCompletedFirstReview:e.hasCompletedFirstReview,hasWithdrawnOneReal:e.hasWithdrawnOneReal,withdrawData:e.withdrawData}),version:2}))},7340:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},7580:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},8186:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]])},9417:(e,a,t)=>{"use strict";t.d(a,{default:()=>x});var s=t(5155),r=t(5695),o=t(2108),l=t(6874),i=t.n(l),n=t(7340),c=t(5040),d=t(7580),h=t(9785),u=t(3311);function m(){let e=(0,r.usePathname)(),a=[{href:"/home",icon:(0,s.jsx)(n.A,{className:"w-5 h-5"}),activeIcon:(0,s.jsx)(n.A,{className:"w-5 h-5 fill-current"}),label:"Home"},{href:"/books",icon:(0,s.jsx)(c.A,{className:"w-5 h-5"}),activeIcon:(0,s.jsx)(c.A,{className:"w-5 h-5 fill-current"}),label:"Livros"},{href:"/community",icon:(0,s.jsx)(d.A,{className:"w-5 h-5"}),activeIcon:(0,s.jsx)(d.A,{className:"w-5 h-5 fill-current"}),label:"Comunidade"},{href:"/withdraw",icon:(0,s.jsx)(h.A,{className:"w-5 h-5"}),activeIcon:(0,s.jsx)(h.A,{className:"w-5 h-5 fill-current"}),label:"Saque"}],t=a=>"/home"===a?"/home"===e||"/"===e:e.startsWith(a);return(0,s.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 z-50",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white via-white/95 to-transparent pointer-events-none"}),(0,s.jsxs)("div",{className:"relative bg-white/90 backdrop-blur-lg border-t border-gray-200/50 shadow-2xl",children:[(0,s.jsx)("div",{className:"max-w-md mx-auto px-4 py-2",children:(0,s.jsx)("div",{className:"flex items-center justify-around",children:a.map(e=>{let a=t(e.href);return(0,s.jsxs)(i(),{href:e.href,className:"\n                    relative flex flex-col items-center justify-center p-3 rounded-2xl transition-all duration-300 group\n                    ".concat(a?"bg-gradient-to-br from-primary-500 to-primary-600 shadow-lg shadow-primary-500/25 scale-105":"hover:bg-gray-100 hover:scale-105","\n                  "),children:[(0,s.jsxs)("div",{className:"\n                    relative transition-all duration-300\n                    ".concat(a?"text-white":"text-gray-600 group-hover:text-primary-500","\n                  "),children:[a?e.activeIcon:e.icon,a&&(0,s.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,s.jsx)(u.A,{className:"w-3 h-3 text-yellow-300 animate-pulse"})})]}),(0,s.jsx)("span",{className:"\n                    text-xs font-medium mt-1 transition-all duration-300\n                    ".concat(a?"text-white font-semibold":"text-gray-600 group-hover:text-primary-500","\n                  "),children:e.label}),e.badge&&e.badge>0&&(0,s.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold shadow-lg",children:e.badge>99?"99+":e.badge}),a&&(0,s.jsx)("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-primary-400/20 to-primary-600/20 blur-xl -z-10"})]},e.href)})})}),(0,s.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,s.jsx)("div",{className:"w-12 h-1 bg-gradient-to-r from-primary-400 to-primary-600 rounded-full opacity-50"})})]})]})}function x(e){let{children:a}=e,t=(0,r.usePathname)(),{data:l,status:i}=(0,o.useSession)(),n=["/","/login","/register"].includes(t)||"loading"===i||!l;return(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)("div",{className:n?"":"pb-20",children:a}),!n&&(0,s.jsx)(m,{})]})}},9420:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},9785:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},9993:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c",variable:"__variable_e8ce0c"}}},e=>{var a=a=>e(e.s=a);e.O(0,[2726,4421,7244,3568,4464,8441,1684,7358],()=>a(6651)),_N_E=e.O()}]);